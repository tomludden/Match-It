(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();let m=document.body;const L=()=>{const t=document.createElement("h1");t.textContent="MatchIt!",m.appendChild(t);const e=document.createElement("button");e.textContent="<",e.id="home-btn",e.addEventListener("click",()=>{window.location.href="https://dynamic-kataifi-82abbe.netlify.app/"}),m.appendChild(e);const a=document.createElement("div");a.className="overlay",a.id="overlay";const s=document.createElement("div");s.className="popup",s.id="gameOverPopup";const o=document.createElement("h1");o.className="pixelated-text",o.textContent="Game Over",s.appendChild(o);const r=document.createElement("button");r.textContent="Play Again",r.id="play-again",r.className="play-again-button",s.appendChild(r),m.appendChild(a),m.appendChild(s);const c=document.createElement("div");c.className="score",c.textContent="Score: 0",m.appendChild(c);const n=document.createElement("div");n.className="attempts",n.textContent="Attempts Left: 5",m.appendChild(n);const v=document.createElement("div");v.className="card-grid",m.appendChild(v)},y=[{name:"Fruit Theme",cards:["🍎","🍌","🍇","🍉","🍊","🍓","🍎","🍌","🍇","🍉","🍊","🍓"],imageClasses:["red-card","yellow-card","purple-card","green-card","orange-card","pink-card"]},{name:"Animal Theme",cards:["🐶","🐱","🐭","🐹","🐰","🦊","🐶","🐱","🐭","🐹","🐰","🦊"],imageClasses:["dog-card","cat-card","mouse-card","hamster-card","rabbit-card","fox-card"]},{name:"Vehicle Theme",cards:["🚗","🚕","🚙","🚌","🚓","🚑","🚗","🚕","🚙","🚌","🚓","🚑"],imageClasses:["car-card","taxi-card","suv-card","bus-card","police-card","ambulance-card"]},{name:"Sport Theme",cards:["⚽","🏀","🏈","⚾","🎾","🏐","⚽","🏀","🏈","⚾","🎾","🏐"],imageClasses:["soccer-card","basketball-card","football-card","baseball-card","tennis-card","volleyball-card"]},{name:"Space Theme",cards:["🚀","🛸","🛰️","🌌","🌍","🌕","🚀","🛸","🛰️","🌌","🌍","🌕"],imageClasses:["rocket-card","ufo-card","satellite-card","galaxy-card","earth-card","moon-card"]}];let f=0,p=0,u=parseInt(localStorage.getItem("score"))||0,d=parseInt(localStorage.getItem("attempts"))||5,l,i,h=JSON.parse(localStorage.getItem("matchedCards"))||[];const b=()=>{const t=document.querySelector(".card-grid"),e=document.querySelector(".score"),a=document.querySelector(".attempts");if(!t||!e||!a)throw new Error("Essential UI elements (card-grid, score, attempts) not found!");E(),e.textContent=`Score: ${u}`,a.textContent=`Attempts Left: ${d}`,g(0)},g=t=>{const e=document.querySelector(".card-grid");if(!e)throw new Error("Card grid element not found!");e.innerHTML="";const a=y[t];if(!a||!Array.isArray(a.cards)||!Array.isArray(a.imageClasses))throw new Error("Invalid theme data!");const s=I(a),o=JSON.parse(localStorage.getItem("matchedCards"))||[];s.forEach(({cardValue:r,imageClass:c})=>{if(!r||!c)throw new Error("Invalid card data detected:",{cardValue:r,imageClass:c});const n=document.createElement("div");n.classList.add("card",c),n.dataset.value=r,o.includes(r)&&(n.classList.add("matched"),n.classList.add("flipped"),n.style.pointerEvents="none"),n.addEventListener("click",function(){this.classList.contains("flipped")||i||(this.classList.add("flipped"),l?(i=this,A()):l=this)}),e.appendChild(n)})},I=t=>{const e=JSON.parse(localStorage.getItem("savedGameData"))||{};if(e.cardPositions&&e.themeName===t.name)return e.cardPositions;const a=t.cards.map((s,o)=>({cardValue:s,imageClass:t.imageClasses[o%t.imageClasses.length]})).sort(()=>Math.random()-.5);return localStorage.setItem("savedGameData",JSON.stringify({themeName:t.name,cardPositions:a})),a},A=()=>{if(!l||!i)throw new Error("Not enough cards to check for a match.");const t=document.querySelector(".score"),e=document.querySelector(".attempts");if(l.dataset.value===i.dataset.value){u++,f++,t.textContent=`Score: ${u}`,h.push(l.dataset.value),localStorage.setItem("matchedCards",JSON.stringify(h)),l.classList.add("matched"),l.classList.add("flipped"),i.classList.add("matched"),i.classList.add("flipped"),C();const a=y[p].cards.length/2;f===a&&O()}else d>0&&d--,e.textContent=`Attempts Left: ${Math.max(d,0)}`,localStorage.setItem("attempts",d),setTimeout(()=>{l.classList.remove("flipped"),i.classList.remove("flipped"),C()},500),d<=0&&N()},C=()=>{l=null,i=null},w=()=>{localStorage.setItem("score",u),localStorage.setItem("attempts",d),localStorage.setItem("matchedCards",JSON.stringify(h))},O=()=>{if(h=[],localStorage.removeItem("matchedCards"),localStorage.removeItem("flippedCards"),d=5,f=0,p++,p>=y.length){new Audio("./src/assets/homer-woohoo.mp3").play(),x("Woohoo!!! You did it");return}w(),g(p)},S=()=>{p=0,u=0,d=5,f=0,h=[],w();const t=document.querySelector(".card-grid");t&&(t.innerHTML=""),E(),g(p);const e=document.querySelector(".score"),a=document.querySelector(".attempts");if(e&&a)e.textContent=`Score: ${u}`,a.textContent=`Attempts Left: ${d}`;else throw new Error("Score or attempts display not found!")},N=()=>{new Audio("./src/assets/kr-exa-game-over-sound.mp3").play(),x("Game Over");const e=document.querySelector("#play-again");if(e)e.removeEventListener("click",S),e.addEventListener("click",S);else throw new Error("Play Again button not found!")},E=()=>{const t=document.querySelector(".overlay"),e=document.querySelector(".popup");if(!t||!e)throw new Error("Overlay or popup element not found!");t.style.display="none",e.style.display="none"},x=t=>{const e=document.querySelector(".overlay"),a=document.querySelector(".popup");if(!e||!a)throw new Error("Overlay or popup element not found!");const s=a.querySelector(".pixelated-text");s.textContent=t,e.style.display="block",a.style.display="block"};console.log("Initial matchedCards:",h);L();b();
